{
  "info": {
    "name": "RuleIQ Compliance API - Fixed URLs",
    "description": "Corrected API collection with proper endpoint paths",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {"key": "base_url", "value": "http://localhost:8000"},
    {"key": "jwt_token", "value": ""},
    {"key": "framework_id", "value": "gdpr"},
    {"key": "session_token", "value": "test-session-123"}
  ],
  "item": [
    {
      "name": "üîê Authentication",
      "item": [
        {
          "name": "Login (JSON)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const response = pm.response.json();",
                  "if (response.access_token) {",
                  "    pm.collectionVariables.set('jwt_token', response.access_token);",
                  "    console.log('JWT token saved');",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"newtest@ruleiq.com\", \"password\": \"NewTestPass123!\"}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/login"
            }
          }
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [{"key": "Authorization", "value": "Bearer {{jwt_token}}"}],
            "url": {"raw": "{{base_url}}/api/v1/auth/me"}
          }
        }
      ]
    },
    {
      "name": "ü§ñ IQ Agent - Fixed",
      "item": [
        {
          "name": "Query Compliance Analysis",
          "request": {
            "method": "POST",
            "header": [
              {"key": "Authorization", "value": "Bearer {{jwt_token}}"},
              {"key": "Content-Type", "value": "application/json"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"query\": \"What are my GDPR compliance gaps?\", \"context\": {}}"
            },
            "url": {"raw": "{{base_url}}/api/v1/iq-agent/query"}
          }
        },
        {
          "name": "Get IQ Agent Health",
          "request": {
            "method": "GET",
            "header": [{"key": "Authorization", "value": "Bearer {{jwt_token}}"}],
            "url": {"raw": "{{base_url}}/api/v1/iq-agent/health"}
          }
        },
        {
          "name": "Get IQ Agent Status",
          "request": {
            "method": "GET",
            "header": [{"key": "Authorization", "value": "Bearer {{jwt_token}}"}],
            "url": {"raw": "{{base_url}}/api/v1/iq-agent/status"}
          }
        }
      ]
    },
    {
      "name": "üÜì Freemium - Fixed",
      "item": [
        {
          "name": "Capture Lead",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"lead@example.com\", \"utm_source\": \"google\", \"utm_medium\": \"cpc\"}"
            },
            "url": {"raw": "{{base_url}}/api/v1/leads"}
          }
        },
        {
          "name": "Start Assessment Session",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\"framework_id\": \"gdpr\", \"industry\": \"technology\", \"company_size\": \"small\"}"
            },
            "url": {"raw": "{{base_url}}/api/v1/sessions"}
          }
        },
        {
          "name": "Get Session Progress",
          "request": {
            "method": "GET",
            "url": {"raw": "{{base_url}}/api/v1/sessions/{{session_token}}"}
          }
        },
        {
          "name": "Submit Answer",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\"question_id\": \"q1\", \"answer_value\": \"yes\"}"
            },
            "url": {"raw": "{{base_url}}/api/v1/sessions/{{session_token}}/answers"}
          }
        },
        {
          "name": "Get Results",
          "request": {
            "method": "GET",
            "url": {"raw": "{{base_url}}/api/v1/sessions/{{session_token}}/results"}
          }
        },
        {
          "name": "Freemium Health Check",
          "request": {
            "method": "GET",
            "url": {"raw": "{{base_url}}/api/v1/freemium/health"}
          }
        }
      ]
    }
  ]
}
