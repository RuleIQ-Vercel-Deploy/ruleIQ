
"metrics_dashboard"str
¢˜"
        MATCH (m:Metric)
        OPTIONAL MATCH (m)-[:MEASURES]->(ctrl:Control)
        RETURN m.type AS metric_type,
               m.name AS metric,
               m.current_value AS current,
               m.target_value AS target,
               m.frequency AS frequency,
               m.owner AS owner,
               CASE 
                 WHEN m.type = 'KPI' AND m.current_value < m.target_value THEN 'GREEN'
                 WHEN m.type = 'KRI' AND m.current_value > m.target_value THEN 'RED'
                 ELSE 'AMBER'
               END AS status,
               COLLECT(ctrl.name) AS related_controls
        ORDER BY m.type, status DESC
        "str
%"Get KPI/KRI dashboard data"strself
¼/ ¼(3"Û(
&
¾ ¾(¬query"#id#:Bstr#
!

Ï Ï(1"#unknown-value#,
*

Ï Ï(1results"#unknown-value#&
$

Ð Ð(-"#new-object#Bdict"
 

Ð Ð(,	"	#map-set#:

Ð Ð(-*A/home/omar/Documents/ruleIQ/langgraph_agent/core/neo4j_service.py