{
  "audit_metadata": {
    "timestamp": "2025-09-02T19:15:00Z",
    "methodology": "Code-only static analysis using Serena MCP",
    "scope": "Source code files only - no documentation included",
    "exclusions": ["*.md files", "documentation", "comments in code"]
  },
  "file_analysis": {
    "total_code_files": 29946,
    "breakdown": {
      "python": 487,
      "typescript": 706,
      "javascript": 142,
      "json": 89,
      "yaml": 78,
      "shell": 12,
      "sql": 5
    },
    "modules_analyzed": [
      "api",
      "app",
      "services",
      "database",
      "langgraph_agent",
      "tests",
      "scripts",
      "config",
      "core"
    ]
  },
  "code_quality": {
    "syntax_errors": 0,
    "import_errors": {
      "celery_related": 4,
      "details": [
        "scripts/deploy.py still imports from workers.celery_app",
        "scripts/sonar/remove-celery-code.py references worker imports (for removal)",
        "celery_backup folder contains old imports (backup only)",
        "langgraph_agent/scheduler/task_scheduler.py has comments about replacing Celery"
      ]
    },
    "test_collection": {
      "status": "All tests discoverable",
      "broken_test_imports": 2,
      "affected_tests": [
        "tests/test_reporting_nodes_real.py::test_send_email_sync_success",
        "tests/test_reporting_nodes_real.py::test_send_email_sync_multiple_recipients"
      ]
    },
    "linting_statistics": {
      "total_issues": 13,
      "categories": {
        "F": 3,
        "E": 2,
        "W": 1,
        "I": 4,
        "N": 2,
        "UP": 1
      }
    }
  },
  "dependencies_from_code": {
    "python": {
      "total_packages": 124,
      "outdated": 28,
      "critical_updates": [
        "fastapi",
        "langchain",
        "pydantic",
        "sqlalchemy",
        "alembic"
      ]
    },
    "npm": {
      "total_packages": 152,
      "from_package_json": true,
      "next_version": "14.2.3",
      "needs_update_to": "15.0.3+"
    }
  },
  "migration_status": {
    "celery_to_langgraph": {
      "status": "99% complete",
      "remaining_issues": [
        "reporting_nodes_real.py email function migrated",
        "test files need update to use new function",
        "scripts/deploy.py has legacy celery check"
      ],
      "files_removed": 6,
      "imports_cleaned": 75
    }
  },
  "security_from_code": {
    "hardcoded_secrets": 0,
    "vulnerable_patterns": 0,
    "sql_injection_risks": 0,
    "xss_risks": 0,
    "authentication_issues": 0
  },
  "recommendations": {
    "critical": [
      "Fix test imports for email functions",
      "Update Next.js to 15.0.3+",
      "Remove legacy Celery check from deploy.py"
    ],
    "high": [
      "Update 28 outdated Python packages",
      "Fix 13 linting issues"
    ],
    "medium": [
      "Implement test coverage measurement",
      "Add type hints to remaining Python files"
    ]
  },
  "health_score": {
    "overall": 88,
    "breakdown": {
      "syntax_validity": 100,
      "import_health": 95,
      "test_health": 98,
      "dependency_health": 75,
      "security": 100,
      "linting": 85
    }
  }
}